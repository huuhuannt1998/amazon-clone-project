{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Huan Bui\\\\Desktop\\\\amazon-clone\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useEffect}from'react';import{db}from\"./firebase\";import'./Orders.css';import{useStateValue}from\"./StateProvider\";import Order from'./Order';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Orders(){var _useStateValue=useStateValue(),_useStateValue2=_slicedToArray(_useStateValue,2),_useStateValue2$=_useStateValue2[0],basket=_useStateValue2$.basket,user=_useStateValue2$.user,dispatch=_useStateValue2[1];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];useEffect(function(){if(user){db.collection('users').doc(user===null||user===void 0?void 0:user.uid).collection('orders').orderBy('created','desc')// the most recent time will be on top of the stack\n.onSnapshot(function(snapshot){return(// update real time on the database\nsetOrders(snapshot.docs.map(function(doc){return{id:doc.id,data:doc.data()};})));});}else{setOrders([]);}},[user]);return/*#__PURE__*/_jsxs(\"div\",{className:\"orders\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your Orders\"}),/*#__PURE__*/_jsx(\"div\",{className:\"orders_order\",children:orders===null||orders===void 0?void 0:orders.map(function(order){return/*#__PURE__*/_jsx(Order,{order:order});})})]});}export default Orders;","map":{"version":3,"sources":["C:/Users/Huan Bui/Desktop/amazon-clone/src/Orders.js"],"names":["React","useState","useEffect","db","useStateValue","Order","Orders","basket","user","dispatch","orders","setOrders","collection","doc","uid","orderBy","onSnapshot","snapshot","docs","map","id","data","order"],"mappings":"sIACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,EAAT,KAAmB,YAAnB,CACA,MAAO,cAAP,CACA,OAASC,aAAT,KAA8B,iBAA9B,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,C,wFAEA,QAASC,CAAAA,MAAT,EAAkB,CAChB,mBAAqCF,aAAa,EAAlD,sFAASG,MAAT,kBAASA,MAAT,CAAiBC,IAAjB,kBAAiBA,IAAjB,CAAyBC,QAAzB,oBACA,cAA4BR,QAAQ,CAAC,EAAD,CAApC,wCAAOS,MAAP,eAAeC,SAAf,eAEAT,SAAS,CAAC,UAAM,CACd,GAAGM,IAAH,CAAS,CACLL,EAAE,CACDS,UADD,CACY,OADZ,EAECC,GAFD,CAEKL,IAFL,SAEKA,IAFL,iBAEKA,IAAI,CAAEM,GAFX,EAGCF,UAHD,CAGY,QAHZ,EAICG,OAJD,CAIS,SAJT,CAIoB,MAJpB,CAI4B;AAJ5B,CAKCC,UALD,CAKY,SAAAC,QAAQ,QAAM;AACtBN,SAAS,CAACM,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAAAN,GAAG,QAAK,CAChCO,EAAE,CAAEP,GAAG,CAACO,EADwB,CAEhCC,IAAI,CAAER,GAAG,CAACQ,IAAJ,EAF0B,CAAL,EAArB,CAAD,CADO,GALpB,EAWH,CAZD,IAYO,CACHV,SAAS,CAAC,EAAD,CAAT,CACH,CAEF,CAjBQ,CAiBN,CAACH,IAAD,CAjBM,CAAT,CAmBE,mBACI,aAAK,SAAS,CAAC,QAAf,wBACI,mCADJ,cAGI,YAAK,SAAS,CAAC,cAAf,UACKE,MADL,SACKA,MADL,iBACKA,MAAM,CAAES,GAAR,CAAY,SAAAG,KAAK,qBACd,KAAC,KAAD,EAAO,KAAK,CAAEA,KAAd,EADc,EAAjB,CADL,EAHJ,GADJ,CAWH,CAED,cAAehB,CAAAA,MAAf","sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport { db } from \"./firebase\";\r\nimport './Orders.css'\r\nimport { useStateValue } from \"./StateProvider\";\r\nimport Order from './Order'\r\n\r\nfunction Orders() {\r\n  const [{ basket, user }, dispatch] = useStateValue();\r\n  const [orders, setOrders] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if(user) {\r\n        db\r\n        .collection('users')\r\n        .doc(user?.uid)\r\n        .collection('orders')\r\n        .orderBy('created', 'desc') // the most recent time will be on top of the stack\r\n        .onSnapshot(snapshot => ( // update real time on the database\r\n            setOrders(snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                data: doc.data()\r\n            })))\r\n        ))\r\n    } else {\r\n        setOrders([]) \r\n    }\r\n\r\n  }, [user])\r\n\r\n    return (\r\n        <div className='orders'>\r\n            <h1>Your Orders</h1>\r\n\r\n            <div className='orders_order'>\r\n                {orders?.map(order => (\r\n                    <Order order={order} />\r\n                ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Orders"]},"metadata":{},"sourceType":"module"}